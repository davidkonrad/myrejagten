"use strict";function splice(a,b,c){return a.substr(0,b)+c+a.substr(b)}angular.module("myrejagtenApp",["ngCookies","ngResource","ngSanitize","ngRoute","btford.socket-io","mgcrea.ngStrap","cfp.hotkeys","LocalStorageModule","angular-inview","leaflet-directive","datatables","datatables.buttons","datatables.bootstrap","frapontillo.bootstrap-switch"]).config(["$routeProvider","$locationProvider","$httpProvider",function(a,b,c){a.otherwise({redirectTo:"/"}),b.html5Mode(!0),c.interceptors.push("authInterceptor")}]).factory("authInterceptor",["$rootScope","$q","$cookieStore","$location",function(a,b,c,d){return{request:function(a){return a.headers=a.headers||{},c.get("token")&&(a.headers.Authorization="Bearer "+c.get("token")),a},responseError:function(a){return 401===a.status?(d.path("/login"),c.remove("token"),b.reject(a)):b.reject(a)}}}]).run(["$rootScope","$location","Auth",function(a,b,c){a.$on("$routeChangeStart",function(a,d){c.isLoggedInAsync(function(a){d.authenticate&&!a&&b.path("/login")})})}]),angular.module("myrejagtenApp").config(["$routeProvider",function(a){a.when("/login",{templateUrl:"app/account/login/login.html",controller:"LoginCtrl"}).when("/signup",{templateUrl:"app/account/signup/signup.html",controller:"SignupCtrl"}).when("/settings",{templateUrl:"app/account/settings/settings.html",controller:"SettingsCtrl",authenticate:!0})}]),angular.module("myrejagtenApp").controller("LoginCtrl",["$scope","Auth","$location","$window","$cookieStore",function(a,b,c,d,e){a.user={},a.errors={};var f=e.get("rememberMe");f&&(a.user.email=f.m,a.user.password=f.p,a.user.rememberMe=!0),a.login=function(d){a.user.rememberMe?e.put("rememberMe",{m:a.user.email,p:a.user.password}):e.remove("rememberMe"),a.submitted=!0,d.$valid&&b.login({email:a.user.email,password:a.user.password}).then(function(){c.path("/")})["catch"](function(b){a.errors.other=b.message})},a.loginOauth=function(a){d.location.href="/auth/"+a}}]),angular.module("myrejagtenApp").controller("SettingsCtrl",["$scope","User","Auth",function(a,b,c){a.errors={},a.changePassword=function(b){a.submitted=!0,b.$valid&&c.changePassword(a.user.oldPassword,a.user.newPassword).then(function(){a.message="Password successfully changed."})["catch"](function(){b.password.$setValidity("mongoose",!1),a.errors.other="Incorrect password",a.message=""})}}]),angular.module("myrejagtenApp").controller("SignupCtrl",["$scope","Auth","$location","$window",function(a,b,c,d){a.user={},a.errors={},a.register=function(d){a.submitted=!0,d.$valid&&b.createUser({name:a.user.name,email:a.user.email,password:a.user.password}).then(function(){c.path("/")})["catch"](function(b){b=b.data,a.errors={},angular.forEach(b.errors,function(b,c){d[c].$setValidity("mongoose",!1),a.errors[c]=b.message})})},a.loginOauth=function(a){d.location.href="/auth/"+a}}]),angular.module("myrejagtenApp").controller("AdminCtrl",["$scope","$http",function(a,b){}]),angular.module("myrejagtenApp").config(["$routeProvider",function(a){a.when("/admin",{templateUrl:"app/admin/admin.html",controller:"AdminCtrl"})}]),angular.module("myrejagtenApp").factory("Alert",["$modal","$q","$timeout",function(a,b,c){var d=null,e=null,f="alertParams";return{show:function(c,g,h){return c[f]={title:g,message:h},d=b.defer(),e=a({scope:c,templateUrl:"app/alert/alert.modal.html",backdrop:"static",show:!0}),e.$promise.then(e.show).then(function(){}),c.alertModalClose=function(a){delete c[f],e.hide(),d.resolve(a)},d.promise}}}]),angular.module("myrejagtenApp").controller("BrugerkontoCtrl",["$scope","$compile","$timeout","$modal","ForsoegModal","DTOptionsBuilder","DTColumnBuilder","DTColumnDefBuilder",function(a,b,c,d,e,f,g,h){a.createForsoeg=function(){e["new"](a).then(function(a){alert(a)})}}]),angular.module("myrejagtenApp").config(["$routeProvider",function(a){a.when("/brugerkonto",{templateUrl:"app/brugerkonto/brugerkonto.html",controller:"BrugerkontoCtrl"})}]),angular.module("myrejagtenApp").controller("CreateUserCtrl",["$scope","$compile","$timeout","$modal","DTOptionsBuilder","DTColumnBuilder","DTColumnDefBuilder",function(a,b,c,d,e,f,g){}]),angular.module("myrejagtenApp").config(["$routeProvider",function(a){a.when("/opret-bruger",{templateUrl:"app/createuser/createuser.html",controller:"CreateUserCtrl"})}]),angular.module("myrejagtenApp").directive("allearterTypeahead",["$parse",function(a){return{restrict:"A",scope:{taxon:"=atTaxon"},link:function(a,b,c){var d="dk"==c.allearterTypeahead;$(b).typeahead({displayText:function(a){return d?a.Dansk_navn:a.Videnskabeligt_navn},afterSelect:function(b){a.taxon.Videnskabeligt_navn=b.Videnskabeligt_navn,a.taxon.Dansk_navn=b.Dansk_navn,a.$apply()},items:20,source:function(a,b){var c="http://allearter-databasen.dk/api/?get=arter&query="+a;return $.get(c,{},function(a){return b(a.allearter)})}})}}}]),angular.module("myrejagtenApp").factory("Utils",function(){return{getObj:function(a,b){var c,d=["$promise","$resolved","toJSON","$get","$save","$query","$remove","$delete","$update"],e={};for(c in a)b?~c.indexOf(b)&&(e[c]=a[c]):~d.indexOf(c)||(e[c]=a[c]);return e},mergeObj:function(a,b,c){b=this.getObj(b);for(var d in b)a[d]=b[d]},fixDate:function(a){var b=new Date(a);return isNaN(b.getTime())?"":("0"+b.getDate()).slice(-2)+"-"+("0"+(b.getMonth()+1)).slice(-2)+"-"+b.getFullYear()},formIsEdited:function(a){var b=document.querySelector(a);if(b){var c=0,d=b.querySelectorAll("input");for(c;c<d.length;c++)if(angular.element(d[c]).hasClass("ng-dirty"))return!0}return!1},formReset:function(a){var b=document.querySelector(a);if(b){var c=0,d=b.querySelectorAll("input");for(c;c<d.length;c++)angular.element(d[c]).removeClass("ng-dirty")}},dataTables_daDk:{sEmptyTable:"Ingen tilgængelige data (prøv en anden søgning)",sInfo:"Viser _START_ til _END_ af _TOTAL_ rækker",sInfoEmpty:"Viser 0 til 0 af 0 rækker",sInfoFiltered:"(filtreret ud af _MAX_ rækker ialt)",sInfoPostFix:"",sInfoThousands:",",sLengthMenu:"Vis _MENU_ rækker",sLoadingRecords:"Henter data...",sProcessing:"Processing...",sSearch:"Filter:",sZeroRecords:"Ingen rækker matchede filter",oPaginate:{sFirst:"Første",sLast:"Sidste",sNext:"Næste",sPrevious:"Forrige"},oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"}},dtNormalizeButtons:function(){$(".dt-button").each(function(a){$(this).removeClass("dt-button").removeClass("buttons-collection").removeClass("buttons-colvis")})},dtPerformSearch:function(a){var b=document.querySelector(".dataTables_filter input");b.value=a,$(b).trigger("keyup")},statusOptions:[{value:-1,text:"Aflyst","class":"btn-danger"},{value:0,text:"Ikke bekræftet","class":"btn-inverse"},{value:1,text:"Bekræftet","class":"btn-success"}],aeNoWater:["spredtBebyggelse","bydel","by","gård","sten","bro","hus","kløft","andenBygning","dal","museumSamling","agerMark","eng","hede","gravhøj","højdedrag","bakke","campingsplads","slugt","kirkeProtestantisk","hal","skovPlantage","stadion","vejrmølle","udsigtstårn","golfbane","folkeskole","folkehøjskole","turistbureau","vejbro","mindesten","langdysse","specialskole","voldVoldsted","privatskoleFriskole","kommunekontor","dyrepark","grænsestenGrænsepæl","hotel","andenSeværdighed","udsigtspunkt","tog","boplads","øgruppe","fagskole","fyrtårn","blomsterpark","universitet","professionshøjskole","kursuscenter","uddannelsescenter","zoologiskHave","kirkeAndenKristen","herregård","storby","kolonihave","land","gravsted","kraftvarmeværk","undersøiskGrund","odde","klint","halvø","rådhus","skydebane","flyveplads","parkAnlæg","ø","sommerhusområde","goKartbane","dysse","løb","ruin","reservat","mindreLufthavn","pynt","hage","gymnasium","industriområde","feriecenter","efterskoleUngdomsskole","kristen","rastepladsMedService","klippeIOverfladen","rastepladsUdenService","sommerhusområdedel","røse","køretekniskAnlæg","runddysse","landingsplads","fængsel","bilfærge","næs","højBanke","jættestue","vandrerhjem","sandKlit","vandkraftværk","hule","trafikhavn","vindmøllepark","fæstningsanlæg","motorbane","strand","vej","hospital","båke","skanse","runesten","vikingeborg","slot","historiskMindeHistoriskAnlæg","veteranjernbane","cykelbane","terminal","bredning","motorvejskryds","skær","skibssætning","skræntNaturlig","motocrossbane","forlystelsespark","marsk","personfærge","svæveflyveplads","hundevæddeløbsbane","varde","primærRingvej","sekundærRingvej","restriktionsareal","landsdel","overskylledeSten","vejkryds","lavning","arboret","løvtræ","bautasten","bautasten","sti","plads","heliport","hestevæddeløbsbane","ledLåge","ås","observatorium","fiskerihavn","sejlløb","nor","tomt"],aeWaterTypes:["sø","vandløb","vandloeb","soe","å","kilde","hav","fjord","bæk","mose","sump","moseSump","bugt","strandpost","lystbådehavn","sund","vandmølle","tørtVedLavvande","botaniskHave"],aePass:"&login=davidkonrad&password=nhmdzm",KOMMENTAR_TYPE:{BOOKING:1,KLASSE:2,PROEVE:3,RESULTAT:4,LOKALITET:5}}}),$.extend(!0,$.fn.dataTable.defaults,{lengthMenu:[[10,25,50,-1],[10,25,50,"Alle"]]}),angular.module("myrejagtenApp").directive("onlyDigits",function(){return{require:"ngModel",restrict:"A",link:function(a,b,c,d){function e(a){if(a){var b=a.replace(/[^0-9.]/g,"");return b.split(".").length>2&&(b=b.substring(0,b.length-1)),b!==a&&(d.$setViewValue(b),d.$render()),parseFloat(b)}return void 0}d.$parsers.push(e)}}}),angular.module("myrejagtenApp").factory("Geo",function(){return{sm_a:6378137,sm_b:6356752.314,sm_EccSquared:.00669437999013,UTMScaleFactor:.9996,degToRad:function(a){return a/180*Math.PI},radToDeg:function(a){return a/Math.PI*180},arcLengthOfMeridian:function(a){var b,c,d,e,f,g,h;return g=(this.sm_a-this.sm_b)/(this.sm_a+this.sm_b),b=(this.sm_a+this.sm_b)/2*(1+Math.pow(g,2)/4+Math.pow(g,4)/64),c=-3*g/2+9*Math.pow(g,3)/16+-3*Math.pow(g,5)/32,d=15*Math.pow(g,2)/16+-15*Math.pow(g,4)/32,e=-35*Math.pow(g,3)/48+105*Math.pow(g,5)/256,f=315*Math.pow(g,4)/512,h=b*(a+c*Math.sin(2*a)+d*Math.sin(4*a)+e*Math.sin(6*a)+f*Math.sin(8*a))},UTMCentralMeridian:function(a){var b;return b=this.degToRad(-183+6*a)},footpointLatitude:function(a){var b,c,d,e,f,g,h,i;return h=(this.sm_a-this.sm_b)/(this.sm_a+this.sm_b),c=(this.sm_a+this.sm_b)/2*(1+Math.pow(h,2)/4+Math.pow(h,4)/64),b=a/c,d=3*h/2+-27*Math.pow(h,3)/32+269*Math.pow(h,5)/512,e=21*Math.pow(h,2)/16+-55*Math.pow(h,4)/32,f=151*Math.pow(h,3)/96+-417*Math.pow(h,5)/128,g=1097*Math.pow(h,4)/512,i=b+d*Math.sin(2*b)+e*Math.sin(4*b)+f*Math.sin(6*b)+g*Math.sin(8*b)},mapLatLngToXY:function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q;g=(Math.pow(this.sm_a,2)-Math.pow(this.sm_b,2))/Math.pow(this.sm_b,2),f=g*Math.pow(Math.cos(a),2),e=Math.pow(this.sm_a,2)/(this.sm_b*Math.sqrt(1+f)),h=Math.tan(a),i=h*h,q=i*i*i-Math.pow(h,6),j=b-c,k=1-i+f,l=5-i+9*f+4*(f*f),m=5-18*i+i*i+14*f-58*i*f,n=61-58*i+i*i+270*f-330*i*f,o=61-479*i+179*(i*i)-i*i*i,p=1385-3111*i+543*(i*i)-i*i*i,d[0]=e*Math.cos(a)*j+e/6*Math.pow(Math.cos(a),3)*k*Math.pow(j,3)+e/120*Math.pow(Math.cos(a),5)*m*Math.pow(j,5)+e/5040*Math.pow(Math.cos(a),7)*o*Math.pow(j,7),d[1]=ArcLengthOfMeridian(a)+h/2*e*Math.pow(Math.cos(a),2)*Math.pow(j,2)+h/24*e*Math.pow(Math.cos(a),4)*l*Math.pow(j,4)+h/720*e*Math.pow(Math.cos(a),6)*n*Math.pow(j,6)+h/40320*e*Math.pow(Math.cos(a),8)*p*Math.pow(j,8)},mapXYToLatLng:function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B;e=this.footpointLatitude(b),i=(Math.pow(this.sm_a,2)-Math.pow(this.sm_b,2))/Math.pow(this.sm_b,2),m=Math.cos(e),h=i*Math.pow(m,2),f=Math.pow(this.sm_a,2)/(this.sm_b*Math.sqrt(1+h)),g=f,j=Math.tan(e),k=j*j,l=k*k,n=1/(g*m),g*=f,o=j/(2*g),g*=f,p=1/(6*g*m),g*=f,q=j/(24*g),g*=f,r=1/(120*g*m),g*=f,s=j/(720*g),g*=f,t=1/(5040*g*m),g*=f,u=j/(40320*g),v=-1-h,w=-1-2*k-h,x=5+3*k+6*h-6*k*h-3*(h*h)-9*k*(h*h),y=5+28*k+24*l+6*h+8*k*h,z=-61-90*k-45*l-107*h+162*k*h,A=-61-662*k-1320*l-720*(l*k),B=1385+3633*k+4095*l+1575*(l*k),d[0]=e+o*v*(a*a)+q*x*Math.pow(a,4)+s*z*Math.pow(a,6)+u*B*Math.pow(a,8),d[1]=c+n*a+p*w*Math.pow(a,3)+r*y*Math.pow(a,5)+t*A*Math.pow(a,7)},latLngToUTMXY:function(a,b,c,d){return this.mapLatLngToXY(a,b,this.UTMCentralMeridian(c),d),d[0]=d[0]*this.UTMScaleFactor+5e5,d[1]=d[1]*this.UTMScaleFactor,d[1]<0&&(d[1]=d[1]+1e7),c},UTMXYToLatLng:function(a,b,c,d,e){var f;a-=5e5,a/=this.UTMScaleFactor,d&&(b-=1e7),b/=this.UTMScaleFactor,f=this.UTMCentralMeridian(c),this.mapXYToLatLng(a,b,f,e)},btnToUTM_OnClick:function(){var a=new Array(2);return isNaN(parseFloat(document.frmConverter.txtLongitude.value))?(alert("Please enter a valid longitude in the lon field."),!1):(lon=parseFloat(document.frmConverter.txtLongitude.value),lon<-180||180<=lon?(alert("The longitude you entered is out of range.  Please enter a number in the range [-180, 180)."),!1):isNaN(parseFloat(document.frmConverter.txtLatitude.value))?(alert("Please enter a valid latitude in the lat field."),!1):(lat=parseFloat(document.frmConverter.txtLatitude.value),lat<-90||90<lat?(alert("The latitude you entered is out of range.  Please enter a number in the range [-90, 90]."),!1):(zone=Math.floor((lon+180)/6)+1,zone=LatLonToUTMXY(this.degToRad(lat),this.degToRad(lon),zone,a),document.frmConverter.txtX.value=a[0],document.frmConverter.txtY.value=a[1],document.frmConverter.txtZone.value=zone,lat<0?document.frmConverter.rbtnHemisphere[1].checked=!0:document.frmConverter.rbtnHemisphere[0].checked=!0,!0)))},EPSG25832_to_WGS84:function(a,b,c,d){var e=new Array(2);return c=c||32,1>c||c>60?(alert("The UTM zone you entered is out of range.  Please enter a number in the range [1, 60]."),!1):(d=d||!1,this.UTMXYToLatLng(a,b,c,d,e),{lat:this.radToDeg(e[1]),lng:this.radToDeg(e[0])})}}}),angular.module("myrejagtenApp").directive("institutionTypeahead",function(){return{restrict:"A",link:function(a,b,c){$(b).typeahead({afterSelect:function(a){console.log("institution selected",a);var b="davidkonrad",c="nhmdzm",d="https://services.kortforsyningen.dk/Geosearch?search&geometryWkt="+a.geometryWkt+"&resources=adresser&limit=10&login="+b+"&password="+c;$.getJSON(d,function(a){console.log(a)})},items:20,displayText:function(a){return a.presentationString},source:function(a,b){var c="davidkonrad",d="nhmdzm",e="https://services.kortforsyningen.dk/Geosearch?search=*"+a+"*&resources=stednavne_v2&limit=100&login="+c+"&password="+d;return $.getJSON(e,function(a){var c=[],d=["gymnasium","uddannelsescenter","privatskoleFriskole","folkeskole","universitet","specialskole"];for(var e in a.data)(~d.indexOf(a.data[e].type)||~d.indexOf(a.data[e].subtype))&&c.push(a.data[e]);return b(c)})}})}}}),angular.module("myrejagtenApp").directive("wetlandTypeahead",function(){return{restrict:"A",link:function(a,b,c){$(b).typeahead({displayText:function(a){return splice(a.presentationString,a.presentationString.indexOf("(")+1,a.subtype+", ")},afterSelect:function(a){console.log(c)},items:20,source:function(a,b){var c="davidkonrad",d="nhmdzm",e="https://services.kortforsyningen.dk/Geosearch?search="+a+"*&resources=stednavne_v2&limit=100&login="+c+"&password="+d;return $.getJSON(e,function(a){var c=[],d=["sø","vandløb","vandloeb","soe","å","kilde","hav","fjord","bæk","mose","sump","moseSump"];for(var e in a.data)(~d.indexOf(a.data[e].type)||~d.indexOf(a.data[e].subtype))&&c.push(a.data[e]);return b(c)})}})}}}),angular.module("myrejagtenApp").controller("ForsoegCtrl",["$scope","$compile","$timeout","$modal","DTOptionsBuilder","DTColumnBuilder","DTColumnDefBuilder",function(a,b,c,d,e,f,g){}]),angular.module("myrejagtenApp").config(["$routeProvider",function(a){a.when("/forsøg",{templateUrl:"app/forsoeg/forsoeg.html",controller:"ForsoegCtrl"})}]),angular.module("myrejagtenApp").factory("ForsoegModal",["$modal","$q","$timeout",function(a,b,c){var d=null,e=null;return{"new":function(f){return d=b.defer(),e=a({scope:f,templateUrl:"app/forsoegModal/forsoegModal.modal.html",backdrop:"static",show:!0}),e.$promise.then(e.show).then(function(){c(function(){})}),f.forsoegModalOk=function(){e.hide(),d.resolve(!0)},f.forsoegModalCancel=function(){e.hide()},d.promise}}}]),angular.module("myrejagtenApp").controller("MainCtrl",["$scope","$compile","$timeout","$modal","DTOptionsBuilder","DTColumnBuilder","DTColumnDefBuilder",function(a,b,c,d,e,f,g){}]),angular.module("myrejagtenApp").config(["$routeProvider",function(a){a.when("/",{templateUrl:"app/main/main.html",controller:"MainCtrl"})}]),angular.module("myrejagtenApp").controller("MyPageCtrl",["$scope","$compile","$timeout","$modal","ForsoegModal","DTOptionsBuilder","DTColumnBuilder","DTColumnDefBuilder",function(a,b,c,d,e,f,g,h){a.createForsoeg=function(){e["new"](a).then(function(a){alert(a)})}}]),angular.module("myrejagtenApp").config(["$routeProvider",function(a){a.when("/mine-forsøg",{templateUrl:"app/mypage/mypage.html",controller:"MyPageCtrl"})}]),angular.module("myrejagtenApp").factory("ProeveNr",["$modal","$q","$timeout","Proeve",function(a,b,c,d){function e(){d.query().$promise.then(function(a){j=a})}function f(a){for(var b=0;b<j.length;b++)if(j[b].proeve_nr==a)return!0;return!1}var g=null,h=null,i=null,j=null;return{change:function(c,d){return e(),i=d,c.proeveNrModal={title:"Ret prøveNr ..",message:"Skriv nyt (unikt) prøveNr :",canSubmit:!1,proeve_nr:d},c.$watch("proeveNrModal.proeve_nr",function(a,b){function d(){g.removeClass("has-error").addClass("has-success"),h.removeClass("glyphicon-remove").addClass("glyphicon-ok"),j.hide(),c.proeveNrModal.canSubmit=!0}function e(){g.removeClass("has-success").addClass("has-error"),h.removeClass("glyphicon-ok").addClass("glyphicon-remove"),j.show(),c.proeveNrModal.canSubmit=!1}var g=$("#modal-proeveNr-input"),h=$("#modal-proeveNr-glyph"),j=$("#modal-proeveNr-exists");a!=b&&(f(a)?a!=i?e():(d(),c.proeveNrModal.canSubmit=!1):d())}),g=b.defer(),h=a({scope:c,templateUrl:"app/proeveNr/proeveNr.modal.html",backdrop:"static",show:!0}),c.proeveNrClose=function(a){h.hide(),g.resolve(a?c.proeveNrModal.proeve_nr:!1)},g.promise},create:function(d){return e(),d.proeveNrModal={title:"Opret ny prøve ..",message:"Skriv nyt (unikt) prøveNr :",canSubmit:!1,proeve_nr:null},d.$watch("proeveNrModal.proeve_nr",function(a,b){function c(){g.removeClass("has-error").addClass("has-success"),h.removeClass("glyphicon-remove").addClass("glyphicon-ok"),i.hide(),d.proeveNrModal.canSubmit=!0}function e(){g.removeClass("has-success").addClass("has-error"),h.removeClass("glyphicon-ok").addClass("glyphicon-remove"),i.show(),d.proeveNrModal.canSubmit=!1}var g=$("#modal-proeveNr-input"),h=$("#modal-proeveNr-glyph"),i=$("#modal-proeveNr-exists");if(a!=b){if(""==a)return e(),void i.hide();f(a)?e():c()}}),g=b.defer(),h=a({scope:d,templateUrl:"app/proeveNr/proeveNr.modal.html",backdrop:"static",show:!0}),h.$promise.then(h.show).then(function(){c(function(){d.proeveNrModal.proeve_nr="",angular.element("#input").focus()},100)}),d.proeveNrClose=function(a){h.hide(),g.resolve(a?d.proeveNrModal.proeve_nr:!1)},g.promise},attachTo:function(d){return e(),d.proeveNrModal={title:"Opret nyt Resultat for Prøve ..",message:"Vælg eksisterende Prøve eller opret ny :",canSubmit:!1,willCreate:!1,proeve_nr:"",proeve_id:null},d.$watchGroup(["proeveNrModal.proeve_nr","proeveNrModal.willCreate"],function(a,b){function c(){g.removeClass("has-error").addClass("has-success"),h.removeClass("glyphicon-remove").addClass("glyphicon-ok"),i.hide(),d.proeveNrModal.canSubmit=!0}function e(){g.removeClass("has-success").addClass("has-error"),h.removeClass("glyphicon-ok").addClass("glyphicon-remove"),i.show(),d.proeveNrModal.canSubmit=!1}var g=$("#modal-proeveNr-input"),h=$("#modal-proeveNr-glyph"),i=$("#modal-proeveNr-create");return""==d.proeveNrModal.proeve_nr?(e(),void i.hide()):void(f(d.proeveNrModal.proeve_nr)?c():d.proeveNrModal.willCreate?(c(),i.show()):e())}),g=b.defer(),h=a({scope:d,templateUrl:"app/proeveNr/proeveNr.modal.html",backdrop:"static",show:!0}),h.$promise.then(h.show).then(function(){c(function(){$("#input").typeahead({showHintOnFocus:!0,source:j,displayText:function(a){return null!=a.proeve_nr?a.proeve_nr:""},items:15,afterSelect:function(a){c(function(){d.proeveNrModal.proeve_nr=a.proeve_nr,d.proeveNrModal.proeve_id=a.proeve_id,d.proeveNrModal.willCreate=!1})}}),d.proeveNrModal.proeve_nr="",angular.element("#input").focus()},100)}),d.proeveNrClose=function(a){if(h.hide(),a)var b=d.proeveNrModal.willCreate?d.proeveNrModal.proeve_nr:d.proeveNrModal.proeve_id;else b=!1;g.resolve(b)},g.promise}}}]),angular.module("myrejagtenApp").controller("ProjektCtrl",["$scope","$compile","$timeout","$modal","ForsoegModal","DTOptionsBuilder","DTColumnBuilder","DTColumnDefBuilder",function(a,b,c,d,e,f,g,h){}]),angular.module("myrejagtenApp").config(["$routeProvider",function(a){a.when("/mine-eksperimenter",{templateUrl:"app/projekt/projekt.html",controller:"ProjektCtrl"})}]),angular.module("myrejagtenApp").factory("SagsNo",["$modal","$q","$timeout","Booking",function(a,b,c,d){function e(){d.query().$promise.then(function(a){j=a})}function f(a){for(var b=0;b<j.length;b++)if(j[b].sagsNo==a)return!0;return!1}var g=null,h=null,i=null,j=null;return{change:function(c,d){return e(),i=d,c.sagsNoModal={title:"Ret sagsNr ..",message:"Skriv nyt (unikt) sagsNrr :",canSubmit:!1,sagsNo:d},c.$watch("sagsNoModal.sagsNo",function(a,b){function d(){g.removeClass("has-error").addClass("has-success"),h.removeClass("glyphicon-remove").addClass("glyphicon-ok"),j.hide(),c.sagsNoModal.canSubmit=!0}function e(){g.removeClass("has-success").addClass("has-error"),h.removeClass("glyphicon-ok").addClass("glyphicon-remove"),j.show(),c.sagsNoModal.canSubmit=!1}var g=$("#modal-sagsNo-input"),h=$("#modal-sagsNo-glyph"),j=$("#modal-sagsNo-exists");a!=b&&(f(a)?a!=i?e():(d(),c.sagsNoModal.canSubmit=!1):d())}),g=b.defer(),h=a({scope:c,templateUrl:"app/sagsNo/sagsNo.modal.html",backdrop:"static",show:!0}),c.sagsNoClose=function(a){h.hide(),g.resolve(a?c.sagsNoModal.sagsNo:!1)},g.promise},create:function(d){return e(),d.sagsNoModal={title:"Opret ny Booking ..",message:"Skriv nyt (unikt) sagsNr :",canSubmit:!1,sagsNo:null},d.$watch("sagsNoModal.sagsNo",function(a,b){function c(){g.removeClass("has-error").addClass("has-success"),h.removeClass("glyphicon-remove").addClass("glyphicon-ok"),i.hide(),d.sagsNoModal.canSubmit=!0}function e(){g.removeClass("has-success").addClass("has-error"),h.removeClass("glyphicon-ok").addClass("glyphicon-remove"),i.show(),d.sagsNoModal.canSubmit=!1}var g=$("#modal-sagsNo-input"),h=$("#modal-sagsNo-glyph"),i=$("#modal-sagsNo-exists");if(a!=b){if(""==a)return e(),void i.hide();f(a)?e():c()}}),g=b.defer(),h=a({scope:d,templateUrl:"app/sagsNo/sagsNo.modal.html",backdrop:"static",show:!0}),h.$promise.then(h.show).then(function(){c(function(){d.sagsNoModal.sagsNo="F16-",angular.element("#input").focus()},100)}),d.sagsNoClose=function(a){h.hide(),g.resolve(a?d.sagsNoModal.sagsNo:!1)},g.promise}}}]),angular.module("myrejagtenApp").controller("TilmeldCtrl",["$scope","$compile","$timeout","$modal","DTOptionsBuilder","DTColumnBuilder","DTColumnDefBuilder",function(a,b,c,d,e,f,g){}]),angular.module("myrejagtenApp").config(["$routeProvider",function(a){a.when("/tilmeld",{templateUrl:"app/tilmeld/tilmeld.html",controller:"TilmeldCtrl"})}]),function(){angular.module("cfp.hotkeys",[]).provider("hotkeys",function(){this.includeCheatSheet=!0,this.templateTitle="Keyboard Shortcuts:",this.template='<div class="cfp-hotkeys-container fade" ng-class="{in: helpVisible}" style="display: none;"><div class="cfp-hotkeys"><h4 class="cfp-hotkeys-title">{{ title }}</h4><table><tbody><tr ng-repeat="hotkey in hotkeys | filter:{ description: \'!$$undefined$$\' }"><td class="cfp-hotkeys-keys"><span ng-repeat="key in hotkey.format() track by $index" class="cfp-hotkeys-key">{{ key }}</span></td><td class="cfp-hotkeys-text">{{ hotkey.description }}</td></tr></tbody></table><div class="cfp-hotkeys-close" ng-click="toggleCheatSheet()">×</div></div></div>',this.cheatSheetHotkey="?",this.cheatSheetDescription="Show / hide this help menu",this.$get=["$rootElement","$rootScope","$compile","$window","$document",function(a,b,c,d,e){function f(a){var b={command:"⌘",shift:"⇧",left:"←",right:"→",up:"↑",down:"↓","return":"↩",backspace:"⌫"};a=a.split("+");for(var c=0;c<a.length;c++)"mod"===a[c]&&(d.navigator&&d.navigator.platform.indexOf("Mac")>=0?a[c]="command":a[c]="ctrl"),a[c]=b[a[c]]||a[c];return a.join(" + ")}function g(a,b,c,d,e,f){this.combo=a instanceof Array?a:[a],this.description=b,this.callback=c,this.action=d,this.allowIn=e,this.persistent=f}function h(){for(var a=o.hotkeys.length;a--;){var b=o.hotkeys[a];b&&!b.persistent&&k(b)}}function i(){o.helpVisible=!o.helpVisible,o.helpVisible?(t=l("esc"),k("esc"),j("esc",t.description,i)):(k("esc"),t!==!1&&j(t))}function j(a,b,c,d,e,f){var h,i=["INPUT","SELECT","TEXTAREA"],j=Object.prototype.toString.call(a);if("[object Object]"===j&&(b=a.description,c=a.callback,d=a.action,f=a.persistent,e=a.allowIn,a=a.combo),b instanceof Function?(d=c,c=b,b="$$undefined$$"):angular.isUndefined(b)&&(b="$$undefined$$"),void 0===f&&(f=!0),"function"==typeof c){h=c,e instanceof Array||(e=[]);for(var k,l=0;l<e.length;l++)e[l]=e[l].toUpperCase(),k=i.indexOf(e[l]),-1!==k&&i.splice(k,1);c=function(a){var b=!0,c=a.target||a.srcElement,d=c.nodeName.toUpperCase();if((" "+c.className+" ").indexOf(" mousetrap ")>-1)b=!0;else for(var e=0;e<i.length;e++)if(i[e]===d){b=!1;break}b&&n(h.apply(this,arguments))}}"string"==typeof d?Mousetrap.bind(a,n(c),d):Mousetrap.bind(a,n(c));var m=new g(a,b,c,d,e,f);return o.hotkeys.push(m),m}function k(a){var b=a instanceof g?a.combo:a;if(Mousetrap.unbind(b),angular.isArray(b)){for(var c=!0,d=b.length;d--;)c=k(b[d])&&c;return c}var e=o.hotkeys.indexOf(l(b));return e>-1?(o.hotkeys[e].combo.length>1?o.hotkeys[e].combo.splice(o.hotkeys[e].combo.indexOf(b),1):o.hotkeys.splice(e,1),!0):!1}function l(a){for(var b,c=0;c<o.hotkeys.length;c++)if(b=o.hotkeys[c],b.combo.indexOf(a)>-1)return b;return!1}function m(a){return a.$id in p||(p[a.$id]=[],a.$on("$destroy",function(){for(var b=p[a.$id].length;b--;)k(p[a.$id][b]),delete p[a.$id][b]})),{add:function(b){var c;return c=arguments.length>1?j.apply(this,arguments):j(b),p[a.$id].push(c),this}}}function n(a){return function(c,d){if(a instanceof Array){var e=a[0],f=a[1];a=function(a){f.scope.$eval(e)}}b.$apply(function(){a(c,l(d))})}}Mousetrap.stopCallback=function(a,b){return(" "+b.className+" ").indexOf(" mousetrap ")>-1?!1:b.contentEditable&&"true"==b.contentEditable},g.prototype.format=function(){for(var a=this.combo[0],b=a.split(/[\s]/),c=0;c<b.length;c++)b[c]=f(b[c]);return b};var o=b.$new();o.hotkeys=[],o.helpVisible=!1,o.title=this.templateTitle,o.toggleCheatSheet=i;var p=[];if(b.$on("$routeChangeSuccess",function(a,b){h(),b&&b.hotkeys&&angular.forEach(b.hotkeys,function(a){var c=a[2];("string"==typeof c||c instanceof String)&&(a[2]=[c,b]),a[5]=!1,j.apply(this,a)})}),this.includeCheatSheet){var q=e[0],r=a[0],s=angular.element(this.template);j(this.cheatSheetHotkey,this.cheatSheetDescription,i),(r===q||r===q.documentElement)&&(r=q.body),angular.element(r).append(c(s)(o))}var t=!1,u={add:j,del:k,get:l,bindTo:m,template:this.template,toggleCheatSheet:i,includeCheatSheet:this.includeCheatSheet,cheatSheetHotkey:this.cheatSheetHotkey,cheatSheetDescription:this.cheatSheetDescription,purgeHotkeys:h,templateTitle:this.templateTitle};return u}]}).directive("hotkey",["hotkeys",function(a){return{restrict:"A",link:function(b,c,d){var e,f;angular.forEach(b.$eval(d.hotkey),function(b,c){f="string"==typeof d.hotkeyAllowIn?d.hotkeyAllowIn.split(/[\s,]+/):[],e=c,a.add({combo:c,description:d.hotkeyDescription,callback:b,action:d.hotkeyAction,allowIn:f})}),c.bind("$destroy",function(){a.del(e)})}}}]).run(["hotkeys",function(a){}])}(),function(a,b,c){function d(a,b,c){return a.addEventListener?void a.addEventListener(b,c,!1):void a.attachEvent("on"+b,c)}function e(a){if("keypress"==a.type){var b=String.fromCharCode(a.which);return a.shiftKey||(b=b.toLowerCase()),b}return z[a.which]?z[a.which]:A[a.which]?A[a.which]:String.fromCharCode(a.which).toLowerCase()}function f(a,b){return a.sort().join(",")===b.sort().join(",")}function g(a){a=a||{};var b,c=!1;for(b in F)a[b]?c=!0:F[b]=0;c||(I=!1)}function h(a,b,c,d,e,g){var h,i,j=[],k=c.type;if(!D[a])return[];for("keyup"==k&&o(a)&&(b=[a]),h=0;h<D[a].length;++h)if(i=D[a][h],(d||!i.seq||F[i.seq]==i.level)&&k==i.action&&("keypress"==k&&!c.metaKey&&!c.ctrlKey||f(b,i.modifiers))){var l=!d&&i.combo==e,m=d&&i.seq==d&&i.level==g;(l||m)&&D[a].splice(h,1),j.push(i)}return j}function i(a){var b=[];return a.shiftKey&&b.push("shift"),a.altKey&&b.push("alt"),a.ctrlKey&&b.push("ctrl"),a.metaKey&&b.push("meta"),b}function j(a){return a.preventDefault?void a.preventDefault():void(a.returnValue=!1)}function k(a){return a.stopPropagation?void a.stopPropagation():void(a.cancelBubble=!0)}function l(a,b,c,d){K.stopCallback(b,b.target||b.srcElement,c,d)||a(b,c)===!1&&(j(b),k(b))}function m(a,b,c){var d,e=h(a,b,c),f={},i=0,j=!1;for(d=0;d<e.length;++d)e[d].seq&&(i=Math.max(i,e[d].level));for(d=0;d<e.length;++d)if(e[d].seq){if(e[d].level!=i)continue;j=!0,f[e[d].seq]=1,l(e[d].callback,c,e[d].combo,e[d].seq)}else j||l(e[d].callback,c,e[d].combo);var k="keypress"==c.type&&H;c.type!=I||o(a)||k||g(f),H=j&&"keydown"==c.type}function n(a){"number"!=typeof a.which&&(a.which=a.keyCode);var b=e(a);if(b)return"keyup"==a.type&&G===b?void(G=!1):void K.handleKey(b,i(a),a)}function o(a){return"shift"==a||"ctrl"==a||"alt"==a||"meta"==a}function p(){clearTimeout(y),y=setTimeout(g,1e3)}function q(){if(!x){x={};for(var a in z)a>95&&112>a||z.hasOwnProperty(a)&&(x[z[a]]=a)}return x}function r(a,b,c){return c||(c=q()[a]?"keydown":"keypress"),"keypress"==c&&b.length&&(c="keydown"),c}function s(a,b,c,d){function f(b){return function(){I=b,++F[a],p()}}function h(b){l(c,b,a),"keyup"!==d&&(G=e(b)),setTimeout(g,10)}F[a]=0;for(var i=0;i<b.length;++i){var j=i+1===b.length,k=j?h:f(d||u(b[i+1]).action);v(b[i],k,d,a,i)}}function t(a){return"+"===a?["+"]:a.split("+")}function u(a,b){var c,d,e,f=[];for(c=t(a),e=0;e<c.length;++e)d=c[e],C[d]&&(d=C[d]),b&&"keypress"!=b&&B[d]&&(d=B[d],f.push("shift")),o(d)&&f.push(d);return b=r(d,f,b),{key:d,modifiers:f,action:b}}function v(a,b,c,d,e){E[a+":"+c]=b,a=a.replace(/\s+/g," ");var f,g=a.split(" ");return g.length>1?void s(a,g,b,c):(f=u(a,c),D[f.key]=D[f.key]||[],h(f.key,f.modifiers,{type:f.action},d,a,e),void D[f.key][d?"unshift":"push"]({callback:b,modifiers:f.modifiers,action:f.action,seq:d,level:e,combo:a}))}function w(a,b,c){for(var d=0;d<a.length;++d)v(a[d],b,c)}for(var x,y,z={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},A={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},B={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},C={option:"alt",command:"meta","return":"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},D={},E={},F={},G=!1,H=!1,I=!1,J=1;20>J;++J)z[111+J]="f"+J;for(J=0;9>=J;++J)z[J+96]=J;d(b,"keypress",n),d(b,"keydown",n),d(b,"keyup",n);var K={bind:function(a,b,c){return a=a instanceof Array?a:[a],w(a,b,c),this},unbind:function(a,b){return K.bind(a,function(){},b)},trigger:function(a,b){return E[a+":"+b]&&E[a+":"+b]({},a),this},reset:function(){return D={},E={},this},stopCallback:function(a,b){return(" "+b.className+" ").indexOf(" mousetrap ")>-1?!1:"INPUT"==b.tagName||"SELECT"==b.tagName||"TEXTAREA"==b.tagName||b.isContentEditable},handleKey:m};a.Mousetrap=K,"function"==typeof define&&define.amd&&define(K)}(window,document),angular.module("myrejagtenApp").factory("Auth",["$location","$rootScope","$http","User","$cookieStore","$q",function(a,b,c,d,e,f){var g={};return e.get("token")&&(g=d.get()),{login:function(a,b){var h=b||angular.noop,i=f.defer();return c.post("/auth/local",{email:a.email,password:a.password}).success(function(a){return e.put("token",a.token),g=d.get(),i.resolve(a),
h()}).error(function(a){return this.logout(),i.reject(a),h(a)}.bind(this)),i.promise},logout:function(){e.remove("token"),g={}},createUser:function(a,b){var c=b||angular.noop;return d.save(a,function(b){return e.put("token",b.token),g=d.get(),c(a)},function(a){return this.logout(),c(a)}.bind(this)).$promise},changePassword:function(a,b,c){var e=c||angular.noop;return d.changePassword({id:g._id},{oldPassword:a,newPassword:b},function(a){return e(a)},function(a){return e(a)}).$promise},getCurrentUser:function(){return g},isLoggedIn:function(){return g.hasOwnProperty("role")},isLoggedInAsync:function(a){g.hasOwnProperty("$promise")?g.$promise.then(function(){a(!0)})["catch"](function(){a(!1)}):a(g.hasOwnProperty("role")?!0:!1)},isAdmin:function(){return"Admin"===g.role},isUser:function(){return"User"===g.role},isGuest:function(){return"Guest"===g.role},mayEdit:function(){return!this.isGuest()},getToken:function(){return e.get("token")}}}]),angular.module("myrejagtenApp").factory("User",["$resource",function(a){return a("/api/users/:id/:controller",{id:"@_id"},{changePassword:{method:"PUT",params:{controller:"password"}},get:{method:"GET",params:{id:"me"}},update:{method:"PUT"}})}]),function(a,b){"undefined"!=typeof module&&module.exports?module.exports=b(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],function(a){return b(a)}):b(a.jQuery)}(this,function(a){var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.typeahead.defaults,c),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.select=this.options.select||this.select,this.autoSelect="boolean"==typeof this.options.autoSelect?this.options.autoSelect:!0,this.highlighter=this.options.highlighter||this.highlighter,this.render=this.options.render||this.render,this.updater=this.options.updater||this.updater,this.displayText=this.options.displayText||this.displayText,this.source=this.options.source,this.delay=this.options.delay,this.$menu=a(this.options.menu),this.$appendTo=this.options.appendTo?a(this.options.appendTo):null,this.shown=!1,this.listen(),this.showHintOnFocus="boolean"==typeof this.options.showHintOnFocus?this.options.showHintOnFocus:!1,this.afterSelect=this.options.afterSelect,this.addItem=!1};b.prototype={constructor:b,select:function(){var a=this.$menu.find(".active").data("value");if(this.$element.data("active",a),this.autoSelect||a){var b=this.updater(a);b||(b=""),this.$element.val(this.displayText(b)||b).change(),this.afterSelect(b)}return this.hide()},updater:function(a){return a},setSource:function(a){this.source=a},show:function(){var b,c=a.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});b="function"==typeof this.options.scrollHeight?this.options.scrollHeight.call():this.options.scrollHeight;var d;return d=this.shown?this.$menu:this.$appendTo?this.$menu.appendTo(this.$appendTo):this.$menu.insertAfter(this.$element),d.css({top:c.top+c.height+b,left:c.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(b){if("undefined"!=typeof b&&null!==b?this.query=b:this.query=this.$element.val()||"",this.query.length<this.options.minLength&&!this.options.showHintOnFocus)return this.shown?this.hide():this;var c=a.proxy(function(){a.isFunction(this.source)?this.process(this.source(this.query,a.proxy(this.process,this))):this.source&&this.process(this.source)},this);clearTimeout(this.lookupWorker),this.lookupWorker=setTimeout(c,this.delay)},process:function(b){var c=this;return b=a.grep(b,function(a){return c.matcher(a)}),b=this.sorter(b),b.length||this.options.addItem?(b.length>0?this.$element.data("active",b[0]):this.$element.data("active",null),this.options.addItem&&b.push(this.options.addItem),"all"==this.options.items?this.render(b).show():this.render(b.slice(0,this.options.items)).show()):this.shown?this.hide():this},matcher:function(a){var b=this.displayText(a);return~b.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(a){for(var b,c=[],d=[],e=[];b=a.shift();){var f=this.displayText(b);f.toLowerCase().indexOf(this.query.toLowerCase())?~f.indexOf(this.query)?d.push(b):e.push(b):c.push(b)}return c.concat(d,e)},highlighter:function(b){var c,d,e,f,g,h=a("<div></div>"),i=this.query,j=b.toLowerCase().indexOf(i.toLowerCase());if(c=i.length,0===c)return h.text(b).html();for(;j>-1;)d=b.substr(0,j),e=b.substr(j,c),f=b.substr(j+c),g=a("<strong></strong>").text(e),h.append(document.createTextNode(d)).append(g),b=f,j=b.toLowerCase().indexOf(i.toLowerCase());return h.append(document.createTextNode(b)).html()},render:function(b){var c=this,d=this,e=!1,f=[],g=c.options.separator;return a.each(b,function(a,c){a>0&&c[g]!==b[a-1][g]&&f.push({__type:"divider"}),!c[g]||0!==a&&c[g]===b[a-1][g]||f.push({__type:"category",name:c[g]}),f.push(c)}),b=a(f).map(function(b,f){if("category"==(f.__type||!1))return a(c.options.headerHtml).text(f.name)[0];if("divider"==(f.__type||!1))return a(c.options.headerDivider)[0];var g=d.displayText(f);return b=a(c.options.item).data("value",f),b.find("a").html(c.highlighter(g,f)),g==d.$element.val()&&(b.addClass("active"),d.$element.data("active",f),e=!0),b[0]}),this.autoSelect&&!e&&(b.filter(":not(.dropdown-header)").first().addClass("active"),this.$element.data("active",b.first().data("value"))),this.$menu.html(b),this},displayText:function(a){return"undefined"!=typeof a&&"undefined"!=typeof a.name&&a.name||a},next:function(b){var c=this.$menu.find(".active").removeClass("active"),d=c.next();d.length||(d=a(this.$menu.find("li")[0])),d.addClass("active")},prev:function(a){var b=this.$menu.find(".active").removeClass("active"),c=b.prev();c.length||(c=this.$menu.find("li").last()),c.addClass("active")},listen:function(){this.$element.on("focus",a.proxy(this.focus,this)).on("blur",a.proxy(this.blur,this)).on("keypress",a.proxy(this.keypress,this)).on("keyup",a.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",a.proxy(this.keydown,this)),this.$menu.on("click",a.proxy(this.click,this)).on("mouseenter","li",a.proxy(this.mouseenter,this)).on("mouseleave","li",a.proxy(this.mouseleave,this))},destroy:function(){this.$element.data("typeahead",null),this.$element.data("active",null),this.$element.off("focus").off("blur").off("keypress").off("keyup"),this.eventSupported("keydown")&&this.$element.off("keydown"),this.$menu.remove()},eventSupported:function(a){var b=a in this.$element;return b||(this.$element.setAttribute(a,"return;"),b="function"==typeof this.$element[a]),b},move:function(a){if(this.shown)switch(a.keyCode){case 9:case 13:case 27:a.preventDefault();break;case 38:if(a.shiftKey)return;a.preventDefault(),this.prev();break;case 40:if(a.shiftKey)return;a.preventDefault(),this.next()}},keydown:function(b){this.suppressKeyPressRepeat=~a.inArray(b.keyCode,[40,38,9,13,27]),this.shown||40!=b.keyCode?this.move(b):this.lookup()},keypress:function(a){this.suppressKeyPressRepeat||this.move(a)},keyup:function(a){switch(a.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}a.preventDefault()},focus:function(a){this.focused||(this.focused=!0,this.options.showHintOnFocus&&this.lookup(""))},blur:function(a){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(a){a.preventDefault(),this.select(),this.hide()},mouseenter:function(b){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),a(b.currentTarget).addClass("active")},mouseleave:function(a){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var c=a.fn.typeahead;a.fn.typeahead=function(c){var d=arguments;return"string"==typeof c&&"getActive"==c?this.data("active"):this.each(function(){var e=a(this),f=e.data("typeahead"),g="object"==typeof c&&c;f||e.data("typeahead",f=new b(this,g)),"string"==typeof c&&(d.length>1?f[c].apply(f,Array.prototype.slice.call(d,1)):f[c]())})},a.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu" role="listbox"></ul>',item:'<li><a class="dropdown-item" href="#" role="option"></a></li>',minLength:1,scrollHeight:0,autoSelect:!0,afterSelect:a.noop,addItem:!1,delay:0,separator:"category",headerHtml:'<li class="dropdown-header"></li>',headerDivider:'<li class="divider" role="separator"></li>'},a.fn.typeahead.Constructor=b,a.fn.typeahead.noConflict=function(){return a.fn.typeahead=c,this},a(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(b){var c=a(this);c.data("typeahead")||c.typeahead(c.data())})}),angular.module("myrejagtenApp").directive("mongooseError",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){b.on("keydown",function(){return d.$setValidity("mongoose",!0)})}}}),angular.module("myrejagtenApp").controller("NavbarCtrl",["$rootScope","$scope","$location","Auth",function(a,b,c,d){b.isCollapsed=!0,b.isLoggedIn=d.isLoggedIn,b.isAdmin=d.isAdmin,b.getCurrentUser=d.getCurrentUser,b.user,b.logout=function(){d.logout(),c.path("/login")},b.isActive=function(a){return a===c.path()},b.getCurrentUser(function(a){b.user=a}),b.$watch(d.isLoggedIn,function(a,b){})}]),angular.module("myrejagtenApp").filter("orderObjectBy",function(){return function(a,b,c){var d=[];return angular.forEach(a,function(a){d.push(a)}),d.sort(function(a,c){return a[b]>c[b]?1:-1}),c&&d.reverse(),d}}),angular.module("myrejagtenApp").factory("socket",["socketFactory",function(a){var b=io("",{path:"/socket.io-client"}),c=a({ioSocket:b});return{socket:c,syncUpdates:function(a,b,d){d=d||angular.noop,c.on(a+":save",function(a){var c=_.find(b,{_id:a._id}),e=b.indexOf(c),f="created";c?(b.splice(e,1,a),f="updated"):b.push(a),d(f,a,b)}),c.on(a+":remove",function(a){var c="deleted";_.remove(b,{_id:a._id}),d(c,a,b)})},unsyncUpdates:function(a){c.removeAllListeners(a+":save"),c.removeAllListeners(a+":remove")}}}]),angular.module("myrejagtenApp").run(["$templateCache",function(a){a.put("app/account/login/login.html",'<div class=container><div class=row><div class=col-sm-12><h1>Login</h1></div><div class=col-sm-12><form class=form name=form ng-submit=login(form) novalidate><div class=form-group><label>Email</label><input type=email name=email class=form-control ng-model=user.email required autofocus></div><div class=form-group><label>Password</label><input type=password name=password class=form-control ng-model=user.password required> <span class="pull-right small"><input type=checkbox id=rememberMe ng-checked=user.rememberMe ng-model=user.rememberMe><label for=rememberMe class=rememberMe>Husk mig</label></span></div><div class="form-group has-error"><p class=help-block ng-show="form.email.$error.required && form.password.$error.required && submitted">Please enter your email and password.</p><p class=help-block ng-show="form.email.$error.email && submitted">Please enter a valid email.</p><p class=help-block>{{ errors.other }}</p></div><div><button class="btn btn-inverse btn-lg btn-login" type=submit>Login</button></div></form></div></div></div>'),a.put("app/account/settings/settings.html",'<div class=container><div class=row><div class=col-sm-12><h1>Change Password</h1></div><div class=col-sm-12><form class=form name=form ng-submit=changePassword(form) novalidate><div class=form-group><label>Current Password</label><input type=password name=password class=form-control ng-model=user.oldPassword mongoose-error autofocus><p class=help-block ng-show=form.password.$error.mongoose>{{ errors.other }}</p></div><div class=form-group><label>New Password</label><input type=password name=newPassword class=form-control ng-model=user.newPassword ng-minlength=3 required><p class=help-block ng-show="(form.newPassword.$error.minlength || form.newPassword.$error.required) && (form.newPassword.$dirty || submitted)">Password must be at least 3 characters.</p></div><p class=help-block>{{ message }}</p><button class="btn btn-lg btn-primary" type=submit>Save changes</button></form></div></div></div>'),a.put("app/account/signup/signup.html",'<div class=container><div class=row><div class=col-sm-12><h1>Sign up</h1></div><div class=col-sm-12><form class=form name=form ng-submit=register(form) novalidate><div class=form-group ng-class="{ \'has-success\': form.name.$valid && submitted,\n                                            \'has-error\': form.name.$invalid && submitted }"><label>Name</label><input name=name class=form-control ng-model=user.name required><p class=help-block ng-show="form.name.$error.required && submitted">A name is required</p></div><div class=form-group ng-class="{ \'has-success\': form.email.$valid && submitted,\n                                            \'has-error\': form.email.$invalid && submitted }"><label>Email</label><input type=email name=email class=form-control ng-model=user.email required mongoose-error><p class=help-block ng-show="form.email.$error.email && submitted">Doesn\'t look like a valid email.</p><p class=help-block ng-show="form.email.$error.required && submitted">What\'s your email address?</p><p class=help-block ng-show=form.email.$error.mongoose>{{ errors.email }}</p></div><div class=form-group ng-class="{ \'has-success\': form.password.$valid && submitted,\n                                            \'has-error\': form.password.$invalid && submitted }"><label>Password</label><input type=password name=password class=form-control ng-model=user.password ng-minlength=3 required mongoose-error><p class=help-block ng-show="(form.password.$error.minlength || form.password.$error.required) && submitted">Password must be at least 3 characters.</p><p class=help-block ng-show=form.password.$error.mongoose>{{ errors.password }}</p></div><div><button class="btn btn-inverse btn-lg btn-login" type=submit>Sign up</button> <a class="btn btn-default btn-lg btn-register" href=/login>Login</a></div><hr><div><a class="btn btn-facebook" href="" ng-click="loginOauth(\'facebook\')"><i class="fa fa-facebook"></i> Connect with Facebook</a> <a class="btn btn-google-plus" href="" ng-click="loginOauth(\'google\')"><i class="fa fa-google-plus"></i> Connect with Google+</a> <a class="btn btn-twitter" href="" ng-click="loginOauth(\'twitter\')"><i class="fa fa-twitter"></i> Connect with Twitter</a></div></form></div></div><hr></div>'),a.put("app/admin/admin.html",'<div class=container><div bs-tabs><div bs-pane data-title="Basis artsliste"><div ng-include="\'app/admin/taxon.tab.html\'"></div></div><div bs-pane data-title=Fag></div><div bs-pane data-title=Klassetrin></div></div></div>'),a.put("app/admin/password.modal.html",'<div class="modal ng-scope top am-fade-and-slide-top" tabindex=-1 role=dialog style="display: block"><div class=modal-dialog><div class=modal-content><div class=modal-header>Edit password</div><div class=modal-body><form><input id=new-password class=form-control placeholder="Enter password" ng-minlength=4 ng-maxlength=30 autofocus ng-enter="updatePassword(); $hide();"><br><button type=button class="btn btn-danger" ng-click=$hide()><i class="fa fa-times"></i>&nbsp;Cancel</button> <button type=button class="btn btn-success" ng-click="updatePassword(); $hide()"><i class="fa fa-check"></i>&nbsp;OK</button></form></div></div></div></div>'),a.put("app/admin/taxon.tab.html",'<style>td.check-col {\n	color:red;\n	max-width: 40px !important;\n	width: 40px !important;\n	text-align: center;\n}\ntable {\n	max-width: 600px !important;\n}	\ntd.artsgruppe {\n	font-size: 90%;\n	padding: 0px;\n}\n\ntd.info-head {\n	font-size: 80%;\n	padding-right: 7px;\n}\ntd.info-content {\n	white-space: nowrap;\n}\nb.dk {\n	font-weight: normal;\n	text-transform: lowercase;\n	color: navy;\n}</style><script type=text/ng-template id=popover.taxon.html><div class="popover" style="width:300px;">\n  <div class="arrow"></div>\n  <div class="popover-content" ng-model="content">\n		<table>\n			<tr><td class="info-content" colspan="2">Artsgruppe: {{ artInfo.Artsgruppe_dk }}</td></tr>\n			<tr><td class="info-head">Rige</td><td class="info-content"><em> {{ artInfo.Rige | lowercase }}</em>  <b class="dk">{{ artInfo.Rige_dk }}</b></td></tr>\n			<tr><td class="info-head">Række</td><td class="info-content"><em>{{ artInfo.Raekke | lowercase}}</em>  <b class="dk">{{ artInfo.Raekke_dk }}</b></td></tr>\n			<tr><td class="info-head">Orden</td><td class="info-content"><em>{{ artInfo.Orden | lowercase}}</em>  <b class="dk">{{ artInfo.Orden_dk }}</b></td></tr>\n			<tr><td class="info-head">Klasse</td><td class="info-content"><em>{{ artInfo.Klasse | lowercase}}</em>  <b class="dk">{{ artInfo.Klasse_dk }}</b></td></tr>\n			<tr><td class="info-head">Familie</td><td class="info-content"><em>{{ artInfo.Familie | lowercase}}</em>  <b class="dk">{{ artInfo.Familie_dk }}</b></td></tr>\n			<tr><td class="info-head">Slægt</td><td class="info-content"><em>{{ artInfo.Slaegt | lowercase}}</em>  <b class="dk">{{ artInfo.Slaegt_dk }}</b></td></tr>\n\n		</table>\n  </div>\n</div></script><br><table class="table table-condensed"><thead><tr><th></th><th>Navn</th><th>Dansk navn</th><th></th></tr></thead><tbody><tr class=success><td><button type=button class="btn btn-primary" title="Tilføj art til basisliste" ng-click=taxonCreate()><i class="fa fa-plus"></i></button></td><td><input allearter-typeahead at-taxon=taxon ng-model=taxon.Videnskabeligt_navn class=form-control></td><td><input allearter-typeahead=dk at-taxon=taxon ng-model=taxon.Dansk_navn class=form-control id=new-taxon></td><td><button type=button class="btn btn-primary current-taxon" bs-popover data-trigger=hover data-html=true data-template-url=popover.taxon.html><i class="fa fa-info"></i></button></td></tr></tbody><tbody ng-repeat="(artsgruppe, arter) in taxons"><tr class=active><td colspan=4 class=artsgruppe>{{ artsgruppe }}</td></tr><tr ng-repeat="(index, art) in taxons[artsgruppe]"><td class=check-col><input type=checkbox ng-model=art.taxon_basisliste title="Medtag i basisliste" ng-click=basislisteToggle(art)></td><td>{{ art.taxon_navn }}</td><td>{{ art.taxon_navn_dk }}</td><td style=text-align:right><button type=button class="btn btn-primary btn-xs">&nbsp;<i class="fa fa-info"></i>&nbsp;</button></td></tr></tbody></table>'),a.put("app/alert/alert.modal.html",'<div class="modal ng-scope top am-fade-and-slide-top center" tabindex=-1 role=dialog style="display: block" id=modal-alert><div class=modal-dialog><div class=modal-content><div class=modal-header><h4 class=modal-title>{{ alertParams.title }}</h4></div><div class=modal-body><i class="fa fa-warning" style=font-size:300%></i> <span class=text ng-bind-html=alertParams.message></span></div><div class=modal-footer><button type=button class="btn btn-success" ng-click=alertModalClose(true)>Fortsæt</button> <button type=button class="btn btn-default" ng-click=alertModalClose(false)>Fortryd</button></div></div></div></div>'),a.put("app/brugerkonto/brugerkonto.html",'<div class=container><h2>Mine forsøg</h2><button role=button class="btn btn-success" ng-click=createForsoeg()>Opret nyt forsøg</button></div>'),a.put("app/createuser/createuser.html",'<div class=container><h2>Opret bruger</h2><form class="form-horizontal col-sm-6"><div class=form-group><label for=email class="col-sm-2 control-label">Email</label><div class=col-sm-10><input type=email class=form-control id=email placeholder=Email></div></div><div class=form-group><label for=username class="col-sm-2 control-label">Brugernavn</label><div class=col-sm-10><input class=form-control id=username placeholder=brugernavn></div></div><div class=form-group><div class="col-sm-offset-2 col-sm-10"><button type=submit class="btn btn-default">Send anmodning</button></div></div></form></div>'),a.put("app/forsoeg/forsoeg.html","<div class=container><h2>Oversigt over forsøg</h2></div>"),a.put("app/forsoegModal/forsoegModal.modal.html",'<div class="modal ng-scope top am-fade-and-slide-top center" tabindex=-1 role=dialog style="display: block" id=forsoeg-modal><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close ng-click=$hide()>×</button><h4 class=modal-title>Opret nyt forsøg</h4></div><div class=modal-body><div class=form-group></div><div class=modal-footer><button type=button class="btn btn-default" ng-click=kommentarModalCancel()>Fortryd</button> <button type=button class="btn btn-success" ng-click=kommentarModalOk()>Ok</button></div></div></div></div></div>'),a.put("app/main/main.html",'<br><div class=container><div class=col-sm-12><div class="col-md-9 no-float" style="min-height:100% !important;height:100%;font-size:18px">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.<h3>Billeder, tekst, links etc</h3></div><div class="col-md-3 no-float" style="border-bottom:1px solid #dadada"><h4>Allerede <b>myrejæger</b>?</h4><div class=form-group><input ng-model=login.brugernavn class="form-control input-sm bold xno-padding" placeholder="Brugernavn"> <input type=password ng-model=login.password class="form-control input-sm bold xno-padding" placeholder=Password style="margin-top:7px"> <button class="btn btn-xs" style=float:left;margin-top:4px>Login</button><div class=checkbox style=float:right;margin-top:1px><label><span style=padding-right:30px>Husk mig</span> <input type=checkbox></label></div></div></div><div class="col-md-3 no-float" style=clear:none;float:right><h4>Tilmeld dig Myrejagten</h4>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</div></div><h2>Myrejagten forside</h2><ul><li>baggrund</li><li>kort, oversigt over undersøgte steder</li><li>seneste fund mv</li></ul></div>'),a.put("app/mypage/mypage.html",'<div class=container><h2>Mine forsøg</h2><button role=button class="btn btn-success" ng-click=createForsoeg()>Opret nyt forsøg</button></div>'),a.put("app/proeveNr/proeveNr.modal.html",'<div class="modal ng-scope top am-fade-and-slide-top center" tabindex=-1 role=dialog style="display: block" id=modal-proeveNr><div class=modal-dialog><div class=modal-content><div class=modal-header><h4 class=modal-title>{{ proeveNrModal.title }}</h4></div><div class=modal-body><label class="control-label normal" for=input>{{ proeveNrModal.message }}</label><div class="form-group has-success has-feedback" id=modal-proeveNr-input><input class="form-control bold" ng-model=proeveNrModal.proeve_nr id=input aria-describedby=inputStatus> <span class="glyphicon glyphicon-ok form-control-feedback" id=modal-proeveNr-glyph aria-hidden=true></span> <span id=inputStatus class=sr-only>(warning)</span></div><span class=text-danger id=modal-proeveNr-exists style=display:none>prøveNr <b>{{ proeveNrModal.proeve_nr }}</b> er optaget!</span> <span class=checkbox id=modal-proeveNr-create style=display:none;margin-top:1px><label class=normal style=padding-left:0px;font-size:85%><input type=checkbox ng-model="proeveNrModal.willCreate"> Opret prøve med Prøvenr. <b>{{ proeveNrModal.proeve_nr }}</b></label></span></div><div class=modal-footer><button type=button class="btn btn-default" ng-click=proeveNrClose(false)>Fortryd</button> <button type=button class="btn btn-success" ng-disabled=!proeveNrModal.canSubmit ng-click=proeveNrClose(true)>OK</button></div></div></div></div>'),a.put("app/projekt/projekt.html",'<div class=container><h2>Mine forsøg</h2><button role=button class="btn btn-success" ng-click=createForsoeg()>Opret nyt forsøg</button></div>'),a.put("app/sagsNo/sagsNo.modal.html",'<div class="modal ng-scope top am-fade-and-slide-top center" tabindex=-1 role=dialog style="display: block" id=modal-sagsNo><div class=modal-dialog><div class=modal-content><div class=modal-header><h4 class=modal-title>{{ sagsNoModal.title }}</h4></div><div class=modal-body><label class="control-label normal" for=input>{{ sagsNoModal.message }}</label><div class="form-group has-success has-feedback" id=modal-sagsNo-input><input class="form-control bold" ng-model=sagsNoModal.sagsNo id=input aria-describedby=inputStatus> <span class="glyphicon glyphicon-ok form-control-feedback" id=modal-sagsNo-glyph aria-hidden=true></span> <span id=inputStatus class=sr-only>(warning)</span></div><span class=text-danger id=modal-sagsNo-exists style=display:none>sagsNr <b>{{ sagsNoModal.sagsNo }}</b> er optaget!</span> <span class=checkbox id=modal-sagsNo-create style=display:none;margin-top:1px><label class=normal style=padding-left:0px;font-size:85%><input type=checkbox ng-model="sagsNoModal.willCreate"> Opret prøve med Prøvenr. <b>{{ sagsNoModal.sagsNo }}</b></label></span></div><div class=modal-footer><button type=button class="btn btn-default" ng-click=sagsNoClose(false)>Fortryd</button> <button type=button class="btn btn-success" ng-disabled=!sagsNoModal.canSubmit ng-click=sagsNoClose(true)>OK</button></div></div></div></div>'),a.put("app/tilmeld/tilmeld.html",'<div class=container><h3>Tilmeld dig Myrejagten</h3><div class=col-md-8><p>bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla</p></div><div class=col-md-6><form class=form-horizontal action="" method=POST><fieldset><div class=control-group><label class=control-label for=username>Brugernavn</label><div class=controls><input id=username name=username placeholder="" class="form-control input-lg"><p class=help-block>Dit navn på myrejagten. Kan indeholde bogstaver, tal og mellemrum.</p></div></div><div class=control-group><label class=control-label for=email>E-mail adresse</label><div class=controls><input type=email id=email name=email placeholder="" class="form-control input-lg"><p class=help-block>En gyldig emailadresse der benyttes som login. Der vil blive sendt en bekræftelsesmail til adressen.</p></div></div><div class=control-group><label class=control-label for=password>Password</label><div class=controls><input type=password id=password name=password placeholder="" class="form-control input-lg"><p class=help-block>Password skal være mindst 3 karakterer lang, men ellers er der ingen regler</p></div></div><div class=control-group><!-- Button --><div class=controls><button class="btn btn-success">Register</button></div></div></fieldset></form></div><div class=col-md-6>aasdasdasdasd</div></div>'),a.put("components/footer/footer.html","<footer class=footer><div class=container><p>Myrejagten 0.0.0 | Natural History Museum of Denmark | <a href=https://github.com/davidkonrad/myrejagten/issues>Issues</a></p></div></footer>"),a.put("components/navbar/navbar.html",'<img src=http://cms.ku.dk/grafik/images/topgrafik/faelles.svg style="height:87px;width:61px;position:absolute;left:20px;top: 20px"><div style="position:absolute;top:98px;border-top:1px solid maroon;min-width:100%"></div><div class="navbar XXXnavbar-default navbar-static-top navbar-snm" ng-controller=NavbarCtrl><div class=container-fluid><div class=navbar-header><button class=navbar-toggle type=button ng-click="isCollapsed = !isCollapsed"><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button><h1 style=padding-left:125px;color:#252525;padding-top:15px>Myrejagten</h1></div><div collapse=isCollapsed class="navbar-collapse collapse" id=navbar-main><!--\n      <ul class="nav navbar-nav">\n        <li ng-class="{ active: isActive(\'/opret-bruger\')}"><a href="/opret-bruger">Opret bruger</span></a></li>\n        <li ng-show="isLoggedIn()" ng-class="{ active: isActive(\'/forsøg\')}"><a href="/forsøg">Forsøg</span></a></li>\n        <li ng-show="isLoggedIn()" ng-class="{ active: isActive(\'/mine-forsøg\')}"><a href="/mine-forsøg">Mine forsøg</span></a></li>\n      </ul>\n			--><ul class="nav navbar-nav navbar-right"><li><a href=/forside>Forside</a></li><li><a href=/tilmeld>Tilmeld</a></li><li><a href=/brugerkonto>Min brugerkonto</a></li><li><a href=/mine-eksperimenter>Mine eksperimenter</a></li><li><a href=/forside>Forsøg</a></li><li ng-hide=isLoggedIn() ng-class="{active: isActive(\'/login\')}"><a href=/login>Log af</a></li><li ng-show=isLoggedIn()><p class=navbar-text>Bruger: <strong>{{ getCurrentUser().name }}</strong></p></li><li ng-show=isLoggedIn() ng-class="{active: isActive(\'/logout\')}"><a href="" ng-click=logout()>Log af</a></li></ul></div></div></div>')}]);