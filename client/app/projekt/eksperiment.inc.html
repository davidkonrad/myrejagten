<div ng-repeat="x in eksperimenter | orderBy : sortering.value " >

	<div bs-tabs class="control-group col-md-12 eksperiment-block" id="eksperiment-cnt-{{ x.eksperiment_id }}">

 		<button class="btn btn-default btn-xs btn-eksperiment-delete" 
			title="{{ !x.hasResultat ? 'Slet eksperiment' : 'Eksperimenter der er blevet analyseret kan ikke slettes' }}" 
			ng-disabled="x.hasResultat"
			ng-click="deleteEksperiment(x.eksperiment_id)">
			<i class="fa fa-times" ng-class="{ 'text-danger': !x.hasResultat }"></i>
		</button>

		<!--------- oversigt -------->	
		<div bs-pane data-title="{{ x.titel || x.myrejagt_id }}" style="padding-left:0px;">
			<form novalidate id="formOversigt{{ x.eksperiment_id }}">
				<input type="hidden" name="eksperiment_id" value="{{ x.eksperiment_id }}" />

				<div class="col-md-6" style="min-height:300px !important;">

					<label class="normal">
						Navn på eksperiment
						<i info-sm 
							info-placement="right"
							info-popover="Her kan du navngive dit eksperiment, fx ud fra hvor du udførte eksperimentet eller hvem du udførte det med. Feltet er ikke obligatorisk, men det kommer til at fremgå på oversigten over dine eksperimenter">
						</i>
					</label>

					<input type="text" class="form-control bold input-lg" select-on-click ng-model="x.titel" name="titel" />
	
					<div class="col-md-6" style="padding-left: 0px !important;">
						<label class="normal required">Dato</label>
						<input type="text" class="form-control bold input-lg" ng-model="x.dato" name="dato" bs-datepicker data-date-format="dd-MM-yyyy" size="7" data-autoclose="true" data-container="body" />
					</div>

					<div class="col-md-3" style="padding-left: 0px !important;">
						<label class="normal required">Start</label>
						<input type="text" class="form-control bold input-lg" ng-model="x.start_tid" name="start_tid" bs-timepicker data-time-format="HH:mm" data-time-type="string" data-length="1" data-minute-step="1" data-arrow-behavior="picker" data-autoclose="true" data-container="body" />
					</div>

					<div class="col-md-3" style="padding-left: 0px !important;">
						<label class="normal required">Slut</label>
						<input type="text" class="form-control bold input-lg" ng-model="x.slut_tid" name="slut_tid" bs-timepicker data-time-format="HH:mm" data-length="1" data-minute-step="1" data-arrow-behavior="picker" data-autoclose="true" data-container="body" />
					</div>

					<label class="normal">Myrejagt-id :</label>
					<input type="text" class="form-control bold input-lg" select-on-click value="{{ x.myrejagt_id }}" readonly />

				</div>

				<div class="col-md-6">
					<leaflet id="{{ x.mapId }}" mapId="{{ x.mapId }}" class="eksperiment-map" center="x.map.center" defaults="x.map.defaults" layers="x.map.layers" markers="x.map.markers" events="x.map.events" height="280px" style="border:1px solid #ccc;border-radius:5px;"></leaflet>
				</div>

				<button class="btn btn-default btn-eksperiment-save" 
					ng-class="{ 'btn-ku' : eksperimentFormChanged('formOversigt{{ x.eksperiment_id }}') }"
					ng-click="updateEksperiment('formOversigt'+x.eksperiment_id)" 
					ng-disabled="!eksperimentFormChanged('formOversigt{{ x.eksperiment_id }}')">
					<i class="fa fa-check"></i>
					Gem ændringer
				</button>	

			</form>
		</div>

	<!---------- lokalitet ------------->
		<div bs-pane data-title="Lokalitet" style="padding-left:0px;">

			<form novalidate id="formLokalitet{{ x.eksperiment_id }}">

				<input type="hidden" name="eksperiment_id" value="{{ x.eksperiment_id }}" />
				<input type="hidden" name="geometryWkt" value="{{ x.geometryWkt }}" />
				<input type="hidden" name="lat" value="{{ x.lat }}" />
				<input type="hidden" name="lng" value="{{ x.lng }}" />

				<div class="control-group col-md-6">

					<label class="normal">Søg lokalitet</label>
							<i info-sm info-placement="right"
								info-popover="”Her skal du finde stedet for dit eksperiment. Det er meget vigtigt at stedet angives så præcist som muligt ved at zoome helt ind på kortet. Du kan søge eksperimentstedet frem vha. af stednavne eller adresse, men du kan også navigere vha. af kortet”. Husk at klik på kortet på det præcise sted, så vil punktet blive blåt og du har godkendt eksperimentlokaliteten.">
							</i>

					<input type="text" class="form-control bold input-md" ng-model="x.adresse" select-on-click adresse-opslag adresse-type="{{ x.adresseType }}" on-select="eksperimentAdresseSelect" eksperiment-id="{{ x.eksperiment_id }}" name="adresse" />
	
					<div class="col-sm-12 text-right">
						<label class="radio-inline" 
							bs-popover 
							data-container="html" 
							data-trigger="hover" 
							data-placement="top" 
							data-content="Opslag i Geodatastyrelsens stednavne-register. Her kan du søge på bygninger, naturområder, seværdigheder etc. med opslag på populærnavne."> 
							<input type="radio" class="exclude-from-form" ng-model="x.adresseType" name="opslag" value="stednavne_v2" />
							Stednavne
						</label>
						<label class="radio-inline" 
							bs-popover 
							data-container="html" 
							data-trigger="hover" 
							data-placement="top" 
							data-content="Opslag i Geodatastyrelsens adresse-register. Her kan du søge på vejnavn og husnr. "> 
							<input type="radio" class="exclude-from-form" ng-model="x.adresseType" name="opslag" value="adresser" checked  />
							Adresser
						</label>
						<!--
						<label class="radio-inline"> 
							<input type="radio" class="exclude-from-form" ng-model="x.adresseType" name="opslag" value="" />
							Fritekst
						</label>
						-->
					</div>
	
					<div class="col-sm-12" style="min-height:10px;"></div>

					<!-- field is made hidden -->
					<input type="hidden" ng-model="x.postnr" name="postnr" />
					<input type="hidden" ng-model="x.by" name="by" />
					<input type="hidden" ng-model="x.kommune" id="kommune" name="kommune" />
					<input type="hidden" ng-model="x.region" name="region" />

					<!--
					<div class="control-group col-md-3" style="padding-left: 0px !important;">
						<label class="normal required">Postnr</label>
						<input type="text" class="form-control bold input-md" ng-model="x.postnr" name="postnr"/>
					</div>

					<div class="control-group col-md-9" style="padding-right: 0px !important; padding-left:0px !important;">
						<label class="normal required">By</label>
						<input type="text" class="form-control bold input-md" ng-model="x.by" name="by"/>
					</div>

					<div class="control-group col-md-7" style="padding-left: 0px !important;">
						<label class="normal required">Kommune</label>
						<input type="text" class="form-control bold input-md" ng-model="x.kommune" id="kommune" name="kommune" />
					</div>

					<div class="control-group col-md-5" style="padding-right: 0px !important; padding-left:0px !important;">
						<label class="normal required">Region</label>
						<input type="text" class="form-control bold input-md" ng-model="x.region" name="region"/>
					</div>
					-->
	
					<div class="control-group col-md-12" style="padding-right: 0px !important; padding-left:0px !important;">
						<label class="normal">Bemærkninger</label>
							<i info-sm info-placement="right"
								info-popover="Her kan du opgive en mere præcis beskrivelse af stedet og/eller notere særlige forhold, t.ex '2 meter fra åen' o.lign.">
							</i>
						<textarea class="form-control" ng-model="x.kommentar" name="kommentar" rows="4"></textarea>
					</div>
					

				</div>

				<div class="control-group col-md-6">
					<leaflet id="{{ x.mapId }}_lok" class="eksperiment-map" center="x.map.center" defaults="x.map.defaults" layers="x.map.layers" markers="x.map.markers" events="x.map.events" height="280px" style="border:1px solid #ccc;border-radius:5px;"></leaflet>
				</div>

			</form>		
			<button class="btn btn-default btn-eksperiment-save" 
							ng-class="{ 'btn-ku' : eksperimentFormChanged('formLokalitet{{ x.eksperiment_id }}') }"
							ng-click="updateEksperiment('formLokalitet'+x.eksperiment_id)" 
							ng-disabled="!eksperimentFormChanged('formLokalitet{{ x.eksperiment_id }}')">
				<i class="fa fa-check"></i>
				Gem ændringer
			</button>	
		</div>

	<!---------- resultat ------------->
<div bs-pane data-title="Data">

	<form novalidate id="formResultater{{ x.eksperiment_id }}">

	<table style="float:left;clar:none;border-spacing:15px 3px;border-collapse: separate;">
		<thead>
				<tr>
					<th class="normal">
						Miljødata
						<i info-sm info-popover="Her skal du taste oplysninger omkring vind og vejr under dit eksperiment. Dine miljødata hjælper forskerne med at lære myrerne og deres levevis bedre at kende. "></i>
					</th>
					<th style="width: 150px;"></th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td class="bold">Temperatur °C</td>
					<td style="white-space:nowrap;">
						<input type="number" 
							placeholder="0" 
							class="form-control" 
							ng-model="x.temp" 
							name="temp"
							ng-class="{ 'has-value' : x.temp != undefined }"
							style="width:70px !important; display: inline;" 
							min="-50"
							max="50"
						/>
						<i info-sm 
							info-placement="right"
							info-popover="Vælg temperaturen fra DMI eller på din mobiltelefon. ">
						</i>
					
					</td>
				</tr>

				<tr>
					<td class="bold">Vejr</td>
					<td>
						<button data-placeholder="Vælg"
									style="width: 99% !important;text-align:left;"
								  type="button" 
									class="btn btn-default select" 
									ng-model="x.vejr" 
									name="vejr"
									data-toggle="true" 
									ng-class="{ 'has-value' : x.vejr != undefined }"
									bs-options="i.value as i.label for i in items.vejr" 
									bs-select>
										<span class="caret"></span>
						</button>

						<i info-sm 
							info-placement="right"
							info-popover="Her skal du vurdere graden af skydække på himlen. ">
						</i>

					</td>
				</tr>

				<tr>
					<td class="bold">Skygge</td>
					<td>
							<button data-placeholder="Vælg"
									style="width: 99% !important;text-align:left;"
								  type="button" 
									class="btn btn-default select" 
									ng-model="x.sol" 
									name="sol"
									data-toggle="true" 
									ng-class="{ 'has-value' : x.sol != undefined }"
									bs-options="i.value as i.label for i in items.sol" 
									bs-select>
									<span class="caret"></span>
								</button>
							<i info-xs 
								info-placement="right"
								info-popover="Her skal du vurdere graden af skygge som eksperimentet er opsat i, fx under et træ eller ved en mur. ">
							</i>
					</td>
				</tr>

				<tr>
					<td class="bold">Vind</td>
					<td>
						<button data-placeholder="Vælg"
								style="width: 99% !important;text-align:left;"
							  type="button" 
								class="btn btn-default select" 
								name="vind"
								ng-model="x.vind" 
								data-toggle="true" 
								ng-class="{ 'has-value' : x.vind != undefined }"
								bs-options="i.value as i.label for i in items.vind" 
								bs-select>
									<span class="caret"></span>
							</button>
							<i info-xs 
								info-placement="right"
								info-popover="Her skal du vurdere ved hvilken graden af vind eksperimentet står i. Du skal også tage højde for om eksperimentet står i læ. ">
							</i>

					</td>
				</tr>

			</tbody>
		</table>


	<table style="border-spacing:15px 3px;border-collapse: separate; float:left;margin-left:50px;">
		<thead>
			<tr>
				<th class="normal">Myredata</th>
				<th colspan="2" class="normal text-center">
					Antal myrer
				</th>
				<th></th>
			</tr>
			<tr>
				<th></th>
				<th class="normal">
					Før indsamling
					<i info-sm info-popover="Antal myrer inden indsamling. Her skriver du det antal myrer du noterede på det pågældende fødeemne ved optælling før indsamling af myrerne. Da det kan være svært at tælle myrerne kan du have fået et gennemsnit med decimaler efter dine optællinger."></i>
				</th>
				<th class="normal">
					Efter frysning
					<i info-sm info-popover="Antal myrer efter frysning. Her skriver du det antal myrer du noterede på det pågældende fødeemne ved optælling efter indsamling og frysning af myrerne. "></i>
				</th>
				<th class="normal">
					Forstyrrelse
					<i info-sm info-popover="Var maden væk da eksperimentet blev afsluttet? Maden kan være blæst væk, være taget af fugle eller andet. – Detaljer kan noteres under ‘Bemærkninger’"></i>
				</th>
				<th class="normal pull-right">Bemærkninger</th>
				</tr>
			</thead>
			<tbody>
				<tr ng-repeat="d in x.Data">
					<td class="bold"> {{ d.madding }} </td>
					<td> 
						<input type="text" 
									placeholder="0.0"
									only-digits
									style="width: 90px;"
									name="myrer_indsamlet"
									class="form-control"
									select-on-click
									ng-model="d.myrer_indsamlet"
									ng-class="{ 'has-value' : d.myrer_indsamlet != undefined }">
					</td>
					<td> 
						<input type="text" 
									placeholder="0"
									style="width: 90px;"
									only-numbers
									name="myrer_frysning"
									class="form-control"  
									select-on-click
									ng-model="d.myrer_frysning"
									ng-class="{ 'has-value' : d.myrer_frysning != undefined }">
					</td>
					<td style="text-align:center;"> 
						<checkbox ng-model="d.madding_stjaalet" name="madding_sjaalet" title="test"></checkbox>
					</td>

					<td rowspan="6" ng-if="$index == 0">
						<textarea class="form-control" rows="10" ></textarea>
					</td>

				</tr>
			</tbody>
		</table>

	</form>
			<button class="btn btn-default btn-eksperiment-save" 
							ng-class="{ 'btn-ku' : eksperimentFormChanged('formResultater{{ x.eksperiment_id }}') }"
							ng-click="updateEksperimentData(x.eksperiment_id)" 
							ng-disabled="!eksperimentFormChanged('formResultater{{ x.eksperiment_id }}')">
				<i class="fa fa-check"></i>
				Gem ændringer
			</button>	

	</div>

	<div bs-pane data-title="Upload billede og video">

		<div class="control-group col-md-6">
			Billede

			<i info-placement="right"
				info-sm 
				info-popover="Her kan du uploade et billede fra dit eksperiment, fx opstillingen, hvem der har udført eksperimentet eller lokaliteten. Dit billede vil være synligt for offentligheden og vises sammen med dit data. Fil størrelsen er begrænset til 10 MB.">
			</i>

			<button class="btn btn-default btn-xs pull-right" 
				title="Fjern billede (billedet bliver slettet fra serveren)"
				ng-disabled="x.upload_billede == undefined"
				ng-class="{ 'btn-danger' : x.upload_billede != undefined }"
				ng-click="deleteImage(x.eksperiment_id, x.upload_billede)">
				<i class="fa fa-remove"></i>
			</button>

			<button class="btn btn-ku btn-xs pull-right" 
				style="margin-right: 5px;"
				ng-click="uploadImage(x.eksperiment_id, x.upload_billede)">Upload billede
			</button>
			<div class="upload-cnt">
				<img class="upload" ng-click="uploadImage(x.eksperiment_id, x.upload_billede)" src="{{ x.upload_billede }}" />
			</div>
		</div>

<!--
		<div class="control-group col-md-6">
			Video

			<button class="btn btn-default btn-xs pull-right" 
				title="Fjern video (filen bliver slettet fra serveren)"
				ng-disabled="x.upload_video == undefined"
				ng-class="{ 'btn-danger' : x.upload_video != undefined }"
				ng-click="deleteVideo(x.eksperiment_id, x.upload_video)">
				<i class="fa fa-remove"></i>
			</button>

			<button class="btn btn-ku btn-xs pull-right" 
				style="margin-right: 5px;"
				ng-click="uploadVideo(x.eksperiment_id, x.upload_video)">Upload Video
			</button>

			<div class="upload-cnt">
        <section class="video" ng-video VVng-model="test">
					<video XXXautoplay="false" vi-screen ng-src="{{ x.upload_video }}" src="{{ x.upload_video }}"></video>
						<section vi-controls="" class="controls">
                <span ng-click="interface.controls.play()" title="Afspil" class="glyphicon glyphicon-play"></span>
                <span ng-click="interface.controls.pause()" title="Pause" class="glyphicon glyphicon-pause"></span>
            </section>
				</section>
			</div>
		</div>
-->

	</div>

</div>




